(this["webpackJsonp21-09-photo-app"]=this["webpackJsonp21-09-photo-app"]||[]).push([[0],{28:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),r=a(21),n=a.n(r),l=(a(28),a(11)),o=a(2),i=a(4),d=a(3),m=a(0),j=function(){return Object(m.jsx)("div",{className:"container-fluid",style:{backgroundImage:"url(https://assets2.rappler.com/2021/01/carousel-2.jpg)",height:"100vh",backgroundRepeat:"none",backgroundSize:"cover",paddingTop:"320px"},children:Object(m.jsx)("h1",{className:"text-center my-5 bg-primary text-white w-50 mx-auto p-2",style:{fontSize:"36px"},children:"Welcome to our albums App"})})},b=a(6),u=a(5),O=function(e){var t=e.album,a=Object(c.useState)({title:"",src:"",albumId:t.id,likes:0,dislikes:0}),s=Object(i.a)(a,2),r=s[0],n=s[1],l=Object(c.useContext)(P).addNewPhoto,d=function(e){var t=e.target;return n(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},t.name,t.value)))};return Object(m.jsxs)("div",{className:"card col-6 col-sm-4 col-md-3 text-center p-3 m-2",children:[Object(m.jsx)(u.b,{to:"/albums/".concat(t.id,"/photos"),children:Object(m.jsx)("img",{src:t.cover,className:"card-img-top",alt:"..."})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",children:t.title}),Object(m.jsx)("button",{className:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#addPhotoModal",children:"Add photo"}),Object(m.jsx)("div",{className:"modal fade",id:"addPhotoModal",tabIndex:"-1","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Add your new photo"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"title",placeholder:"Type photo title",value:r.title,onChange:d}),Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"src",placeholder:"Type cover src",value:r.src,onChange:d})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){return l(r)},children:"add photo"})})]})})})]})]})},h=function(){var e=(0,Object(c.useContext)(P).currentUsersAlbums)();return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{className:"text-center my-5",children:"All our albums"}),e.map((function(e){return Object(m.jsx)(O,{album:e},e.id)}))]})},x=function(){return JSON.parse(localStorage.getItem("users"))||[]},p=function(e){return localStorage.setItem("users",JSON.stringify(e))},N=function(e){return localStorage.setItem("currentUserId",JSON.stringify(e))},v=function(){return JSON.parse(localStorage.getItem("currentUserId"))},f=function(e){var t=e.user,a=v();return Object(m.jsxs)("div",{className:"card col-6 col-sm-4 col-md-3 text-center p-3 m-2",children:[t.src?Object(m.jsx)("img",{src:t.src,className:"card-img-top",alt:"..."}):Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10rem",height:"10rem",fill:"currentColor",className:"bi bi-person-fill mx-auto text-primary",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsxs)("h5",{className:"card-title",children:[t.fName," ",t.lName]}),Object(m.jsx)("p",{className:"card-text",children:t.email}),a===t.id?Object(m.jsx)(u.b,{className:"btn btn-dark w-100",to:"/user/".concat(t.id),children:"Profile"}):Object(m.jsx)(u.b,{className:"btn btn-dark w-100",to:"/albums/user/".concat(t.id),children:"View albums"})]})]})},g=function(){var e=Object(c.useContext)(P).users,t=Object(d.f)(),a=v();return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{className:"text-center my-5",children:"All our users"}),Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)(f,{id:e.id,user:e},e.id)}))}),a?"":Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"d-grid gap-2 col-4 mx-auto",children:Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){return t.push("/registration")},children:"Registration"})})]})]})},y=function(){var e=Object(c.useContext)(P),t=e.currentUser,a=e.logoutUser,s=e.getUserNameById,r=Object(d.f)();return Object(m.jsx)("nav",{className:"navbar navbar-expand bg-primary mb-3",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0 ",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(u.c,{exact:!0,to:"/",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(u.c,{to:"/users",children:"Users"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(u.c,{to:"/albums",children:"Albums"})})]}),t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"text-white me-3 list-unstyled",children:"Hi, ".concat(s(t).fName," ").concat(s(t).lName)}),Object(m.jsx)("li",{className:"nav-item text-white list-unstyled",onClick:function(){a(),r.push("/")},children:"Logout"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"text-white me-3 list-unstyled",children:"Hi, guest!"}),Object(m.jsx)(u.b,{className:"nav-item",to:"/login",children:"Login"})]})]})})},w=function(e){var t=e.message;return Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:Object(m.jsx)("h1",{children:t})})},C=function(){var e=Object(c.useContext)(P).addUser,t=Object(d.f)(),a=Object(c.useState)({fName:"",lName:"",email:"",password:"",avatar:""}),s=Object(i.a)(a,2),r=s[0],n=s[1],l=Object(c.useState)(null),j=Object(i.a)(l,2),u=j[0],O=j[1],h=function(e){n(Object(o.a)(Object(o.a)({},r),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(m.jsxs)("div",{className:"container",children:[u&&Object(m.jsx)(w,{message:u}),Object(m.jsx)("div",{className:"w-50 mx-auto",children:Object(m.jsxs)("form",{onSubmit:function(a){a.preventDefault(),r.fName.trim()&&r.lName.trim()&&r.email.trim()&&r.password.trim()&&(e(r)?t.push("/users"):(O("user specified email is already exist"),n(Object(o.a)(Object(o.a)({},r),{},{email:""}))))},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"First Name"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"fName",value:r.fName,onChange:h})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Last Name"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"lName",value:r.lName,onChange:h})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Email"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"email",value:r.email,onChange:h})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"password",value:r.password,onChange:h})]}),Object(m.jsxs)("div",{className:"form-group mb-2",children:[Object(m.jsx)("label",{children:"Avatar"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"avatar",value:r.avatar,onChange:h})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Registration"})})]})})]})},S=function(){var e=Object(c.useContext)(P),t=e.currentUser,a=e.addNewAlbum,s=e.currentUsersAlbums,r=Object(c.useState)({title:"",cover:"",userId:t}),n=Object(i.a)(r,2),l=n[0],d=n[1],j=function(e){var t=e.target;d(Object(o.a)(Object(o.a)({},l),{},Object(b.a)({},t.name,t.value)))},u=s();return Object(m.jsxs)("div",{className:"col-7 p-3 my-2",children:[Object(m.jsx)("h3",{className:"text-center",children:"My albums"}),Object(m.jsx)("div",{className:"row",children:u.map((function(e){return Object(m.jsx)(O,{album:e},e.id)}))}),Object(m.jsx)("button",{className:"w-100 btn btn-success my-3",type:"button","data-bs-toggle":"modal","data-bs-target":"#addAlbumModal",children:"add new album"}),Object(m.jsx)("div",{className:"modal fade",id:"addAlbumModal",tabIndex:"-1","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Make your new photo album"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"title",placeholder:"Type album title",value:l.title,onChange:j}),Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"cover",placeholder:"Type cover src",value:l.cover,onChange:j})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){return a(l)},children:"add album"})})]})})})]})},I=function(){var e=Object(c.useContext)(P),t=e.getCurrentUserObj,a=e.updateUser,s=Object(c.useState)(t()),r=Object(i.a)(s,2),n=r[0],l=r[1],d=function(e){l(Object(o.a)(Object(o.a)({},n),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"card col-4 text-center p-3 m-2",children:[n.avatar?Object(m.jsx)("img",{src:n.avatar,className:"card-img-top",alt:"..."}):Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10rem",height:"10rem",fill:"currentColor",className:"bi bi-person-fill mx-auto text-primary",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.fName.trim()&&n.lName.trim()&&n.email.trim()&&n.password.trim()},children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"First Name"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"fName",value:n.fName,onChange:d})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Last Name"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"lName",value:n.lName,onChange:d})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Email"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"email",value:n.email,onChange:d})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"password",value:n.password,onChange:d})]}),Object(m.jsxs)("div",{className:"form-group mb-2",children:[Object(m.jsx)("label",{children:"Avatar"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"avatar",value:n.avatar,onChange:d})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("button",{onClick:function(){return a(n)},type:"submit",className:"btn btn-primary w-100",children:"Save changes"})})]})})]}),Object(m.jsx)(S,{})]})})},U=function(e){var t=e.photo;return Object(m.jsxs)("div",{className:"card col-6 col-sm-4 col-md-3 text-center p-3 m-2",children:[Object(m.jsx)("img",{src:t.src,className:"card-img-top",alt:"..."}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("h5",{className:"card-title",children:t.title})})]})},A=function(e){var t=e.match,a=Object(c.useContext)(P),s=a.currentAlbumPhotos,r=a.currentUsersAlbums,n=a.addNewPhoto,l=+t.params.id,d=r().find((function(e){return e.id===l})),j=Object(c.useState)({title:"",src:"",albumId:d.id,likes:0,dislikes:0}),u=Object(i.a)(j,2),O=u[0],h=u[1],x=s(l),p=function(e){var t=e.target;return h(Object(o.a)(Object(o.a)({},O),{},Object(b.a)({},t.name,t.value)))};return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:d.title}),Object(m.jsx)("button",{className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#addPhotoModal",children:"Add photo"}),Object(m.jsx)("div",{className:"modal fade",id:"addPhotoModal",tabIndex:"-1","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Add your new photo"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"title",placeholder:"Type photo title",value:O.title,onChange:p}),Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"src",placeholder:"Type cover src",value:O.src,onChange:p})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){return n(O)},children:"add photo"})})]})})}),Object(m.jsx)("div",{className:"row",children:x.map((function(e){return Object(m.jsx)(U,{photo:e},e.id)}))})]})},k=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(i.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(null),n=Object(i.a)(r,2),l=n[0],j=n[1],u=function(e){var t=e.target;s(Object(o.a)(Object(o.a)({},a),{},Object(b.a)({},t.name,t.value)))},O=Object(c.useContext)(P).changeCurrentUser,h=Object(d.f)();return Object(m.jsx)("div",{className:"container my-5",children:Object(m.jsxs)("div",{className:"col-6 mx-auto my-5",children:[l&&Object(m.jsx)(w,{message:l}),Object(m.jsx)("h2",{className:"text-center",children:"Enter your data please"}),Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"email",placeholder:"Type email",onChange:u,value:a.email}),Object(m.jsx)("input",{className:"form-control my-3",type:"text",name:"password",placeholder:"Type password",value:a.password,onChange:u}),Object(m.jsx)("div",{className:"d-flex justify-content-end",children:Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){j(null),O(a)?h.push("/"):(j("login or password is wrong"),s({email:"",password:""}))},children:"login"})})]})})},P=s.a.createContext();var M=function(){var e=Object(c.useState)(x()),t=Object(i.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(v()),n=Object(i.a)(r,2),b=n[0],u=n[1],O=Object(c.useState)(function(){var e;return null!==(e=JSON.parse(localStorage.getItem("albums")))&&void 0!==e?e:[]}()),f=Object(i.a)(O,2),w=f[0],S=f[1],U=Object(c.useState)(function(){var e;return null!==(e=JSON.parse(localStorage.getItem("photos")))&&void 0!==e?e:[]}()),M=Object(i.a)(U,2),J=M[0],T=M[1];return Object(m.jsxs)(P.Provider,{value:{users:a,addUser:function(e){if(!a.some((function(t){return t.email===e.email}))){var t=Object(o.a)(Object(o.a)({},e),{},{id:Date.now()}),c=[].concat(Object(l.a)(a),[t]);return s(c),p(c),N(t.id),!0}return!1},changeCurrentUser:function(e){var t=function(e){var t=x().find((function(t){return t.email===e.email}));return t&&t.password===e.password?t.id:null}(e);return!!t&&(u(t),N(t),!0)},currentUser:b,getUserNameById:function(e){return a.find((function(t){return t.id===e}))},logoutUser:function(){u(null),localStorage.removeItem("currentUserId")},getCurrentUserObj:function(){return a.find((function(e){return e.id===b}))},updateUser:function(e){var t=Object(l.a)(a),c=t.findIndex((function(t){return t.id===e.id}));t[c]=Object(o.a)({},e),s(t),p(t)},addNewAlbum:function(e){var t=[].concat(Object(l.a)(w),[Object(o.a)(Object(o.a)({},e),{},{id:Date.now()})]);S(t),function(e){localStorage.setItem("albums",JSON.stringify(e))}(t)},currentUsersAlbums:function(){return w.filter((function(e){return e.userId===b}))},addNewPhoto:function(e){var t=[].concat(Object(l.a)(J),[Object(o.a)(Object(o.a)({},e),{},{id:Date.now()})]);T(t),function(e){localStorage.setItem("photos",JSON.stringify(e))}(t)},currentAlbumPhotos:function(e){return J.filter((function(t){return t.albumId===e}))}},children:[Object(m.jsx)(y,{}),Object(m.jsxs)(d.c,{children:[Object(m.jsx)(d.a,{path:"/user/:id",component:I}),Object(m.jsx)(d.a,{path:"/users",component:g}),Object(m.jsx)(d.a,{path:"/albums/:id/photos",component:A}),Object(m.jsx)(d.a,{path:"/albums",component:h}),Object(m.jsx)(d.a,{path:"/login",component:k}),Object(m.jsx)(d.a,{path:"/registration",component:C}),Object(m.jsx)(d.a,{path:"/",component:j})]})]})};a(38),a(39);n.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(u.a,{children:Object(m.jsx)(M,{})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.eb33c286.chunk.js.map